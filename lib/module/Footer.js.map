{"version":3,"sources":["Footer.tsx"],"names":["React","useCallback","useContext","useMemo","useState","Button","ImageBackground","StyleSheet","Text","TextInput","View","ScrollView","TouchableOpacity","Animated","FadeInDown","FadeOutDown","PropsContext","MediaType","selectImage","_Footer","props","propsContext","message","setMessage","mentions","foundedMentions","setFoundedMentions","image","setImage","cuttedText","replyingTo","text","slice","onChangeText","split","forEach","word","push","filter","mention","console","log","indexOf","toLowerCase","replace","onPressSend","repliedTo","media","onPressMention","target","prev","messagesArray","lastMessageIndex","length","lastMessage","renderMenu","splittedWords","startsWith","mentionStyles","containerStyle","styles","mentionContainer","map","labelStyle","mentionLabel","onKeyPress","key","onPressImage","then","r","assets","type","Image","uri","base64","position","bottom","backgroundColor","reply","replyStyles","replyBody","replyUsername","usernameStyle","user","username","footerProps","closeReplyButton","onPressCancelReply","container","_image","v","mediaOverlay","marginBottom","borderRadius","imageClearButton","color","textAlign","addMore","fontSize","flexDirection","alignItems","value","enableImageUploads","shortedTextInput","textInput","inputStyle","placeholder","e","nativeEvent","renderImageAction","paddingHorizontal","sendButton","create","padding","width","borderWidth","borderColor","button","borderLeftColor","borderLeftWidth","flex","fontWeight","height","borderStyle","justifyContent","marginLeft","marginTop","alignContent","marginRight","Footer","memo"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useMemo, useState } from 'react';\nimport {\n  Button,\n  ImageBackground,\n  StyleSheet,\n  Text,\n  TextInput,\n  View,\n} from 'react-native';\nimport { ScrollView, TouchableOpacity } from 'react-native-gesture-handler';\nimport Animated, { FadeInDown, FadeOutDown } from 'react-native-reanimated';\nimport { PropsContext } from './Chatty';\nimport { IFooterProps, IMedia, MediaType } from './types/Chatty.types';\nimport { selectImage } from './utils/imagePicker';\n\nfunction _Footer(props: IFooterProps) {\n  const propsContext = useContext(PropsContext);\n  const [message, setMessage] = useState<string>('');\n  const [mentions] = useState(['JohnDoe']);\n  const [foundedMentions, setFoundedMentions] = useState<string[]>([]);\n  const [image, setImage] = useState<IMedia[] | undefined>();\n\n  const cuttedText = useMemo(() => {\n    if (props.replyingTo) {\n      return props.replyingTo.text.slice(0, 100) + '...';\n    }\n\n    return null;\n  }, [props?.replyingTo]);\n\n  const onChangeText = useCallback(\n    (text: string) => {\n      const foundedMentions: string[] = [];\n\n      // Iterate over all text\n      text.split(' ').forEach((word) => {\n        foundedMentions.push(\n          // Check and push if word exists in mentions\n          ...mentions.filter((mention) => {\n            console.log(text, mention.indexOf(word));\n            return (\n              mention\n                .toLowerCase()\n                .indexOf(word.toLowerCase().replace('@', '')) != -1\n            );\n          })\n        );\n      });\n\n      setFoundedMentions(foundedMentions);\n\n      props.onChangeText(text);\n      setMessage(text);\n    },\n    [props, mentions]\n  );\n\n  const onPressSend = useCallback(() => {\n    props.onPressSend({\n      text: message,\n      repliedTo: props.replyingTo,\n      media: image,\n    });\n    setMessage('');\n    setImage([]);\n  }, [message, props, image]);\n\n  const onPressMention = (target: string) => {\n    setMessage((prev) => {\n      const messagesArray = prev.split(' ');\n      const lastMessageIndex = messagesArray.length - 1;\n      const lastMessage = messagesArray[lastMessageIndex];\n\n      prev = prev.replace(lastMessage, '@' + target);\n\n      return prev;\n    });\n\n    setFoundedMentions([]);\n  };\n\n  const renderMenu = useCallback(() => {\n    if (message && foundedMentions.length > 0) {\n      const splittedWords = message.split(' ');\n\n      if (splittedWords[splittedWords.length - 1].startsWith('@')) {\n        return (\n          <Animated.View\n            entering={FadeInDown}\n            exiting={FadeOutDown}\n            style={\n              props.mentionStyles?.containerStyle ?? styles.mentionContainer\n            }\n          >\n            {foundedMentions.map((mention) => (\n              <TouchableOpacity onPress={() => onPressMention(mention)}>\n                <Text\n                  style={props.mentionStyles?.labelStyle ?? styles.mentionLabel}\n                >\n                  @{mention}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </Animated.View>\n        );\n      }\n    }\n\n    return null;\n  }, [\n    foundedMentions,\n    message,\n    props.mentionStyles?.containerStyle,\n    props.mentionStyles?.labelStyle,\n  ]);\n\n  const onKeyPress = useCallback((key: string) => {\n    if (key === ' ') {\n      setFoundedMentions([]);\n    }\n  }, []);\n\n  const onPressImage = useCallback(async () => {\n    selectImage().then((r) => {\n      const assets = {\n        type: MediaType.Image,\n        uri: r?.assets ? r.assets[0].uri : r.uri,\n        base64: r?.assets ? r.assets[0].base64 : r.base64,\n      };\n      if (image) {\n        setImage([...image, assets]);\n      } else {\n        setImage([assets]);\n      }\n    });\n  }, [image]);\n\n  return (\n    <View\n      style={\n        image &&\n        image.length > 0 && {\n          position: 'absolute',\n          bottom: -70,\n          backgroundColor: '#fff',\n        }\n      }\n    >\n      {props.replyingTo && (\n        <Animated.View\n          entering={FadeInDown}\n          exiting={FadeOutDown}\n          style={[styles.reply, props.replyStyles?.containerStyle]}\n        >\n          <View style={styles.replyBody}>\n            <Text\n              style={[styles.replyUsername, props.replyStyles?.usernameStyle]}\n            >\n              {props.replyingTo.user.username}\n            </Text>\n            <Text style={props.replyStyles?.labelStyle}>{cuttedText}</Text>\n          </View>\n          {propsContext.footerProps.closeReplyButton ? (\n            propsContext.footerProps.closeReplyButton(props)\n          ) : (\n            <Button title=\"cancel\" onPress={props.onPressCancelReply} />\n          )}\n        </Animated.View>\n      )}\n\n      {renderMenu()}\n\n      <View style={[styles.container, props.containerStyle]}>\n        {image && image.length > 0 && (\n          <ScrollView horizontal pagingEnabled>\n            {image.map((_image) => (\n              <TouchableOpacity\n                onPress={() =>\n                  setImage((prev) => prev && prev.filter((v) => v !== _image))\n                }\n                style={styles.media}\n              >\n                <ImageBackground\n                  style={[styles.mediaOverlay, { marginBottom: 15 }]}\n                  source={{ uri: _image.uri }}\n                  imageStyle={{\n                    borderRadius: 15,\n                  }}\n                >\n                  <View style={styles.media}>\n                    <View style={styles.imageClearButton}>\n                      <Text style={{ color: '#fff', textAlign: 'center' }}>\n                        x\n                      </Text>\n                    </View>\n                  </View>\n                </ImageBackground>\n              </TouchableOpacity>\n            ))}\n\n            <TouchableOpacity onPress={onPressImage}>\n              <View style={styles.addMore}>\n                <Text style={{ fontSize: 20, color: '#ccc' }}>+</Text>\n              </View>\n            </TouchableOpacity>\n          </ScrollView>\n        )}\n\n        <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n          <TextInput\n            value={props.value ?? message}\n            onChangeText={onChangeText}\n            style={[\n              propsContext?.enableImageUploads\n                ? styles.shortedTextInput\n                : styles.textInput,\n\n              props?.inputStyle,\n            ]}\n            placeholder={props?.placeholder ?? 'Type a message...'}\n            onKeyPress={(e) => onKeyPress(e.nativeEvent.key)}\n          />\n\n          {propsContext?.enableImageUploads && (\n            <>\n              {props?.renderImageAction ? (\n                props.renderImageAction({\n                  onPressImage,\n                })\n              ) : (\n                <TouchableOpacity\n                  onPress={onPressImage}\n                  style={{ paddingHorizontal: 10 }}\n                >\n                  <Text style={{ fontSize: 20 }}>📷</Text>\n                </TouchableOpacity>\n              )}\n            </>\n          )}\n\n          {props?.sendButton ? (\n            props.sendButton({\n              onPressSend: onPressSend,\n            })\n          ) : (\n            <Button title=\"Send\" onPress={onPressSend} color=\"#0084ff\" />\n          )}\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 10,\n  },\n  textInput: {\n    padding: 10,\n    width: '80%',\n    borderWidth: 1,\n    borderColor: '#ccc',\n  },\n  shortedTextInput: {\n    padding: 10,\n    width: '70%',\n    borderWidth: 1,\n    borderColor: '#ccc',\n  },\n  button: {\n    width: '20%',\n    backgroundColor: '#fcba03',\n  },\n  reply: {\n    flexDirection: 'row',\n    padding: 10,\n    backgroundColor: '#f5f5f5',\n    borderLeftColor: '#c8faaf',\n    borderLeftWidth: 6,\n  },\n  replyBody: {\n    flex: 1,\n  },\n  replyUsername: {\n    fontWeight: 'bold',\n  },\n\n  addMore: {\n    width: 100,\n    height: 100,\n    borderWidth: 1,\n    borderStyle: 'dashed',\n    borderRadius: 15,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderColor: '#ccc',\n  },\n  imageClearButton: {\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    width: 18,\n    height: 18,\n    marginLeft: 10,\n    marginTop: 5,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignContent: 'center',\n  },\n  media: {\n    width: 110,\n    height: 100,\n    borderRadius: 15,\n    marginRight: 10,\n    marginBottom: 10,\n  },\n  mediaOverlay: {\n    width: 100,\n    height: 100,\n    backgroundColor: 'rgba(0,0,0,0.2)',\n    borderRadius: 15,\n  },\n  mentionContainer: {\n    position: 'absolute',\n    bottom: 50,\n    width: '100%',\n    padding: 10,\n    backgroundColor: '#E5EEFA',\n  },\n  mentionLabel: {\n    padding: 10,\n    color: '#1939B7',\n  },\n});\n\nexport const Footer = React.memo(_Footer);\n"]}