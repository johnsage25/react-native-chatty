{"version":3,"sources":["TypingStatus.tsx"],"names":["React","useContext","useImperativeHandle","useState","Text","ChatBubble","PropsContext","loadLottie","_TypingStatus","_","ref","isTyping","setIsTyping","propsContext","LottieView","_isTyping","renderTypingBubble","typingAnimation","require","width","TypingStatus","memo","forwardRef"],"mappings":"AAAA,OAAOA,KAAP,IAAqBC,UAArB,EAAiCC,mBAAjC,EAAsDC,QAAtD,QAAsE,OAAtE;AACA,SAASC,IAAT,QAAqB,cAArB;AAEA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,YAAT,QAA6B,WAA7B;AACA,SAASC,UAAT,QAA2B,iBAA3B;;AAEA,SAASC,aAAT,CAAuBC,CAAvB,EAA+BC,GAA/B,EAA2D;AACzD,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAMU,YAAY,GAAGZ,UAAU,CAACK,YAAD,CAA/B;AACA,QAAMQ,UAAU,GAAGP,UAAU,EAA7B;AAEAL,EAAAA,mBAAmB,CACjBQ,GADiB,EAEjB,OAAO;AACLE,IAAAA,WAAW,EAAGG,SAAD,IAAwB;AACnCH,MAAAA,WAAW,CAACG,SAAD,CAAX;AACD;AAHI,GAAP,CAFiB,EAOjB,EAPiB,CAAnB;AAUA,MAAI,CAACJ,QAAL,EAAe,OAAO,IAAP;;AAEf,MAAIG,UAAJ,EAAgB;AACd,QAAID,YAAJ,aAAIA,YAAJ,eAAIA,YAAY,CAAEG,kBAAlB,EAAsC;AACpC,aAAOH,YAAY,CAACG,kBAAb,CAAgC;AACrCC,QAAAA,eAAe,eACb,oBAAC,UAAD;AACE,UAAA,MAAM,EAAEC,OAAO,CAAC,8BAAD,CADjB;AAEE,UAAA,QAAQ,MAFV;AAGE,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT;AAHT;AAFmC,OAAhC,CAAP;AASD;;AAED,wBACE,oBAAC,UAAD,qBACE,oBAAC,UAAD;AACE,MAAA,MAAM,EAAED,OAAO,CAAC,8BAAD,CADjB;AAEE,MAAA,QAAQ,MAFV;AAGE,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT;AAHT,MADF,CADF;AASD,GAtBD,MAsBO;AACL,QAAIN,YAAJ,aAAIA,YAAJ,eAAIA,YAAY,CAAEG,kBAAlB,EAAsC;AACpC,aAAOH,YAAY,CAACG,kBAAb,EAAP;AACD;;AAED,wBAAO,oBAAC,IAAD,oBAAP;AACD;AACF;;AAED,OAAO,MAAMI,YAAY,gBAAGpB,KAAK,CAACqB,IAAN,eAAWrB,KAAK,CAACsB,UAAN,CAAiBd,aAAjB,CAAX,CAArB","sourcesContent":["import React, { Ref, useContext, useImperativeHandle, useState } from 'react';\nimport { Text } from 'react-native';\nimport type { ITypingStatusRef } from 'src/types/Chatty.types';\nimport { ChatBubble } from '../ChatBubble';\nimport { PropsContext } from '../Chatty';\nimport { loadLottie } from '../utils/lottie';\n\nfunction _TypingStatus(_: any, ref: Ref<ITypingStatusRef>) {\n  const [isTyping, setIsTyping] = useState(false);\n  const propsContext = useContext(PropsContext);\n  const LottieView = loadLottie();\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      setIsTyping: (_isTyping: boolean) => {\n        setIsTyping(_isTyping);\n      },\n    }),\n    []\n  );\n\n  if (!isTyping) return null;\n\n  if (LottieView) {\n    if (propsContext?.renderTypingBubble) {\n      return propsContext.renderTypingBubble({\n        typingAnimation: (\n          <LottieView\n            source={require('../assets/lottie/typing.json')}\n            autoPlay\n            style={{ width: 30 }}\n          />\n        ),\n      });\n    }\n\n    return (\n      <ChatBubble>\n        <LottieView\n          source={require('../assets/lottie/typing.json')}\n          autoPlay\n          style={{ width: 30 }}\n        />\n      </ChatBubble>\n    );\n  } else {\n    if (propsContext?.renderTypingBubble) {\n      return propsContext.renderTypingBubble();\n    }\n\n    return <Text>Typing...</Text>;\n  }\n}\n\nexport const TypingStatus = React.memo(React.forwardRef(_TypingStatus));\n"]}